{{ 'landing-page-main-product.css' | asset_url | stylesheet_tag }}

{% liquid 
    assign slider_content_blocks = ''
    assign options = section.settings
    assign product = options.product_selected
    assign descriptionContent = page.metafields.custom.landing_page_description.value
    assign descriptionText = descriptionContent.text 
    assign textIcons = product.metafields.custom.texticons.value
    assign isProductImagesSlider = section.blocks.size
    if isProductImagesSlider <= 0
      assign isProductImagesSlider = true
    else 
      assign isProductImagesSlider = false
    endif
    if isProductImagesSlider
      assign slider_content_blocks = product.images
    else 
      assign slider_content_blocks = section.blocks
    endif
  %}

  {%  capture slider_content %} 
    {%  for block in slider_content_blocks %}
          {%  if isProductImagesSlider %} 
            {%  assign image = block %}
          {%  else  %}
              {%  assign image = block.settings.product_image %}
          {%  endif %}
          {%  render 'shopify-responsive-image', image: image , aspect_ratio: 1 %}
          {%  unless forloop.last %}::carousel_item {%  endunless %}
    {%  endfor  %}
  {%  endcapture %}

<div class="landing-page-main-product">
 <div class="landing-page-main-product__wrapper">
    <div class="landing-page-main-product__container">
        <div class="landing-page-main-product__carousel" data-parent>
            <div class="landing-page-main-product__main-carousel">
              <custom-carousel>
                {%  render 'custom-carousel' , slider_content: slider_content %}
                <script type="text/json" data-settings>
                  {
                    "slidesPerView": 1,
                    "spaceBetween": 15,
                    "autoplay": {
                      "delay": 3000
                    },
                    "breakpoints": {
                      "320": {
                        "pagination": true
                      },
                      "768": {
                        "spaceBetween": 20,
                        "pagination": true
                      },
                      "1024": {
                        "navigation": true,
                        "pagination": true
                      }
                    }
                  }
                </script>
              </custom-carousel>
            </div>
            <div class="landing-page-main-product__thumbnail-carousel" data-parent>
              <custom-carousel>
                {%  render 'custom-carousel' , slider_content: slider_content %}
                <script type="text/json" data-settings>
                  {
                    "slidesPerView": 3,
                    "spaceBetween": 15,
                    "pagination": false,
                    "navigation": true
                  }
                </script>
              </custom-carousel>
            </div>
        </div>
        <div class="landing-page-main-product__content">
            <div class="landing-page-main-product__info">
           
                  <h3 class="landing-page-main-product__title">{{product.title}}</h3>
                  <div class="landing-page-main-product__reviews"></div>
                  <div class="landing-page-main-product__description_title">{{descriptionContent.title}}</div>
                  <div class="landing-page-main-product__description">{{descriptionContent.description}}</div>
                    <div class="landing-page-main-product__icon-text-wrapper">
                      {% if textIcons %}
                        {% for item in textIcons %}
                          {%liquid assign image = item.icon.value %}
                            <div class="landing-page-main-product__icon-text-wrapper-item">
                              <div>{% render 'shopify-responsive-image', image: image, aspect_ratio: 1 %}</div>
                              <div>{{item.text}}</div>
                            </div>
                        {% endfor %}
                      {% endif %}
                    </div>
                  <div class="landing-page-main-product__banner-teaser"></div>
              
            </div>
        </div>
    </div>
</div>
</div>
{%  schema %} 
{
  "name": "Main product-landing page",
   "settings": [
        {
            "type": "product",
            "id": "product_selected",
            "label": "Product"
        }
    ],
    "blocks": [
      {
        "type": "image",
        "name": "image",
        "settings": [
          {
              "type": "image_picker",
              "id": "product_image",
              "label": "Product image"
          }
        ]
      }
    ],
  "presets": [
    {
        "name": "Main product-landing page"
    }
  ]
}
{%  endschema %}