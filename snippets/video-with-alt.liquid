{% assign prepared_class = class | append: ' yall-video-lazy' %}

{% capture prepared_video %}
  {{ video | video_tag: class: prepared_class, autoplay: true, loop: true, muted: true }}
{% endcapture %}

{%- liquid
  assign image_alt = 'Image'

  if video.alt != blank
    assign image_alt = video.alt
  endif

  assign image_tag = '<img' | append: ' alt="' | append: image_alt | append: '"'
-%}

{{ prepared_video | replace: '<img', image_tag | replace: 'src', 'data-src' }}
